<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title x-text="`${verticalData.brand} - ${verticalData.headline}`">LegalCallAI - Never Miss Another High-Value Case Again</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>📞</text></svg>">
  
  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'GA_MEASUREMENT_ID');
  </script>
  <script type="module" src="/src/supabase.js"></script>
  <script type="module" src="/src/main.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'sans': ['Inter', 'system-ui', 'sans-serif'],
          },
          colors: {
            primary: {
              50: '#f0fdf4',
              100: '#dcfce7',
              500: '#00D16A',
              600: '#00B85A',
              700: '#009B4D',
              900: '#006633'
            }
          }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    .gradient-bg {
      background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #2563eb 100%);
    }
    .glass-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .feature-card {
      transition: all 0.3s ease;
    }
    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }
    .pricing-card {
      transition: all 0.3s ease;
    }
    .pricing-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    }
    
    /* Background Ripple Effect */
    .ripple-bg {
      position: relative;
      background: linear-gradient(110deg, #ffffff 0.6%, #f8f9fa);
      overflow: hidden;
    }
    
    .ripple-grid {
      position: absolute;
      inset: -200px;
      display: grid;
      grid-template-columns: repeat(50, 56px);
      grid-template-rows: repeat(13, 56px);
      justify-content: center;
      align-content: start;
      padding: 4px;
      pointer-events: auto;
      z-index: 1;
      opacity: 0.8;
    }
    
    .ripple-cell {
      position: relative;
      border: 0.5px solid rgba(209, 213, 219, 0.5);
      background-color: rgba(249, 250, 251, 0.8);
      opacity: 0.4;
      transition: opacity 150ms ease;
      will-change: transform;
      cursor: pointer;
    }
    
    .ripple-cell:hover {
      opacity: 0.8;
    }
    
    .ripple-cell.animating {
      animation: var(--animate-cell-ripple);
      animation-fill-mode: none;
    }
    
    @media (prefers-color-scheme: dark) {
      .ripple-cell {
        border-color: rgba(209, 213, 219, 0.3);
        background-color: rgba(255, 255, 255, 0.1);
        box-shadow: 0px 0px 40px 1px rgba(255, 255, 255, 0.05) inset;
      }
    }
    
    .stars-content {
      position: relative;
      z-index: 10;
    }
    
    /* Hide Alpine.js elements before initialization */
    [x-cloak] { display: none !important; }
  </style>
</head>
<body x-data="app" class="bg-gray-50">

  <!-- Page 1: Landing Page -->
  <div x-show="currentPage === 'landing'" class="min-h-screen ripple-bg overflow-hidden" x-data="rippleBackground()">
    <!-- Ripple Grid -->
    <div class="ripple-grid">
      <template x-for="i in 650" :key="i">
        <div 
          class="ripple-cell" 
          :class="{ 'animating': animatingCells.includes(i-1) }"
          :style="cellStyles[i-1] || {}"
          @click="handleCellClick($event, i-1)">
        </div>
      </template>
    </div>
    
    <!-- Navigation -->
    <nav class="relative z-50 py-6 stars-content">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center">
          <div class="text-gray-900 font-bold text-2xl" x-text="verticalData.brand"></div>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <div class="relative pt-16 pb-32 overflow-hidden stars-content">
      <div class="relative">
        <div class="lg:mx-auto lg:max-w-7xl lg:px-8 lg:grid lg:grid-cols-2 lg:grid-flow-col-dense lg:gap-24">
          <div class="px-4 max-w-xl mx-auto sm:px-6 lg:py-20 lg:max-w-none lg:mx-0 lg:px-0">
            <div class="space-y-8 lg:space-y-12">
              <!-- Headline -->
              <div>
                <h1 class="text-[32px] leading-[1.125] sm:text-[56px] sm:leading-[1.07] font-semibold tracking-[-0.022em] text-black" x-text="verticalData.headline"></h1>
              </div>
              
              <!-- Subheading -->
              <div>
                <p class="text-[19px] leading-[1.42] sm:text-[21px] sm:leading-[1.38] font-normal tracking-[-0.022em] text-black/80 max-w-[540px]" x-text="verticalData.subheading"></p>
              </div>
              
              <!-- CTA Button -->
              <div class="pt-2">
                <button 
                  @click="goToPage('pricing')" 
                  class="inline-flex items-center justify-center px-6 py-3 text-[17px] font-medium tracking-[-0.022em] text-white bg-black rounded-full hover:bg-black/90 transition-colors duration-200 min-w-[180px]">
                  View Plans & Pricing
                </button>
              </div>
            </div>
          </div>
          <div class="mt-12 sm:mt-16 lg:mt-0">
            <div class="px-4 sm:pl-6 md:-mr-16 lg:px-0 lg:m-0 lg:relative lg:h-full">
              <!-- Apple-Style Features Component -->
              <div class="relative max-w-lg mx-auto lg:max-w-none">
                <div class="bg-white/70 backdrop-blur-2xl rounded-[20px] sm:rounded-[28px] shadow-[0_8px_30px_rgb(0,0,0,0.08)] border border-black/[0.08] overflow-hidden">
                  
                  <!-- Header Section -->
                  <div class="px-5 sm:px-8 pt-6 sm:pt-8 pb-4 sm:pb-6">
                    <h3 class="text-[22px] sm:text-[28px] font-semibold tracking-tight text-black leading-tight">Key Features</h3>
                    <div class="mt-2 w-12 h-0.5 bg-black/10 rounded-full"></div>
                  </div>
                  
                  <!-- Features List -->
                  <div class="px-5 sm:px-8 pb-6 sm:pb-8">
                    <div class="space-y-0">
                      <template x-for="(feature, index) in verticalData.features" :key="feature.title">
                        <div class="group py-4 sm:py-6 first:pt-0 last:pb-0">
                          <!-- Feature Item -->
                          <div class="flex items-start space-x-3 sm:space-x-4">
                            <!-- Icon Container -->
                            <div class="flex-shrink-0 w-10 h-10 sm:w-11 sm:h-11 bg-black/[0.04] rounded-xl sm:rounded-2xl flex items-center justify-center group-hover:bg-black/[0.06] transition-colors duration-200">
                              <span class="text-lg sm:text-xl opacity-70" x-text="feature.icon"></span>
                            </div>
                            
                            <!-- Content -->
                            <div class="flex-1 min-w-0">
                              <h4 class="text-[17px] sm:text-[19px] font-semibold text-black mb-1.5 sm:mb-2 tracking-[-0.01em] leading-tight" x-text="feature.title"></h4>
                              <p class="text-[14px] sm:text-[15px] text-black/60 leading-[1.43] sm:leading-[1.47] tracking-[-0.01em] font-normal" x-text="feature.description"></p>
                            </div>
                          </div>
                          
                          <!-- Divider -->
                          <div x-show="index < verticalData.features.length - 1" class="mt-4 sm:mt-6 h-px bg-black/[0.08]"></div>
                        </div>
                      </template>
                    </div>
                  </div>
                  
                  <!-- Status Footer -->
                  <div class="bg-black/[0.02] px-5 sm:px-8 py-3 sm:py-4 border-t border-black/[0.06]">
                    <div class="flex items-center justify-center space-x-2">
                      <div class="w-2 h-2 bg-[#30D158] rounded-full"></div>
                      <span class="text-[12px] sm:text-[13px] font-medium text-black/70 tracking-[-0.01em]">Available 24/7</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Mobile Bottom CTA -->
    <div class="block sm:hidden relative z-50 px-4 pb-8">
      <div class="max-w-xl mx-auto">
        <button 
          @click="goToPage('pricing')" 
          class="w-full inline-flex justify-center px-6 py-3 text-[17px] font-medium tracking-[-0.022em] text-white bg-black rounded-full hover:bg-black/90 transition-colors duration-200 min-w-[180px]">
          View Plans & Pricing
        </button>
      </div>
    </div>
  </div>

  <!-- Page 2: Pricing Page -->
  <div x-show="currentPage === 'pricing'" class="min-h-screen ripple-bg overflow-hidden" x-data="rippleBackground()">
    <!-- Ripple Grid -->
    <div class="ripple-grid">
      <template x-for="i in 650" :key="i">
        <div 
          class="ripple-cell" 
          :class="{ 'animating': animatingCells.includes(i-1) }"
          :style="cellStyles[i-1] || {}"
          @click="handleCellClick($event, i-1)">
        </div>
      </template>
    </div>
    <div class="relative pt-10 pb-16 stars-content">
      <div class="max-w-6xl mx-auto px-4 sm:px-6">
        
        <!-- Header -->
        <div class="text-center mb-12">
          <h1 class="text-[36px] leading-[1.1] sm:text-[48px] sm:leading-[1.07] font-semibold tracking-[-0.022em] text-black mb-5" x-text="verticalData.pricing.headline"></h1>
          <p class="text-[15px] leading-[1.42] sm:text-[19px] sm:leading-[1.38] font-normal tracking-[-0.022em] text-black/60 max-w-2xl mx-auto" x-text="verticalData.pricing.subheading"></p>
        </div>

        <!-- Pricing Cards -->
        <div class="grid lg:grid-cols-3 gap-5 mb-12">
          <template x-for="(tier, index) in verticalData.pricing.tiers" :key="tier.name">
            <div class="relative">
              <!-- Featured Badge -->
              <div 
                x-show="tier.featured" 
                class="absolute -top-3 left-1/2 transform -translate-x-1/2 z-10">
                <div class="bg-black text-white px-4 py-1.5 rounded-full text-[13px] font-medium tracking-[-0.01em]">
                  Most Popular
                </div>
              </div>
              
              <div 
                class="bg-white border border-black/[0.08] rounded-[18px] p-7 h-full"
                :class="tier.featured ? 'border-black/[0.12] shadow-[0_4px_20px_rgba(0,0,0,0.08)]' : ''">
                
                <!-- Plan Header -->
                <div class="mb-7">
                  <h3 class="text-[26px] font-semibold tracking-[-0.022em] text-black mb-2" x-text="tier.name"></h3>
                  <div class="mb-4">
                    <span class="text-[44px] font-semibold tracking-[-0.022em] text-black" x-text="tier.price"></span>
                    <span class="text-[16px] text-black/60 font-normal tracking-[-0.022em]">/month</span>
                  </div>
                  <p class="text-[14px] text-black/60 font-normal tracking-[-0.01em] leading-[1.47]" x-text="tier.description"></p>
                </div>
                
                <!-- Features -->
                <div class="mb-7">
                  <ul class="space-y-2.5">
                    <template x-for="feature in tier.features" :key="feature">
                      <li class="flex items-start">
                        <div class="flex-shrink-0 w-5 h-5 rounded-full bg-black/[0.08] flex items-center justify-center mr-3 mt-0.5">
                          <div class="w-2 h-2 rounded-full bg-black"></div>
                        </div>
                        <span class="text-[14px] text-black/80 font-normal leading-[1.47] tracking-[-0.01em]" x-text="feature"></span>
                      </li>
                    </template>
                  </ul>
                </div>
                
                <!-- CTA Button -->
                <button 
                  @click="goToPage('email-capture', tier)" 
                  class="w-full py-3 rounded-full text-[16px] font-medium tracking-[-0.022em] transition-colors duration-200"
                  :class="tier.featured ? 'bg-black text-white hover:bg-black/90' : 'bg-black/[0.08] text-black hover:bg-black/[0.12]'">
                  Start 14-Day Free Trial
                </button>
              </div>
            </div>
          </template>
        </div>

        <!-- Guarantee -->
        <div class="text-center">
          <div class="inline-flex items-center space-x-2 bg-black/[0.04] rounded-full px-4 sm:px-5 py-2 sm:py-2.5">
            <div class="w-1.5 h-1.5 sm:w-2 sm:h-2 bg-[#30D158] rounded-full flex-shrink-0"></div>
            <span class="text-[12px] sm:text-[14px] font-medium text-black/70 tracking-[-0.01em] leading-tight" x-text="verticalData.pricing.guarantee"></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Page 3: Email Capture -->
  <div x-show="currentPage === 'email-capture'" class="min-h-screen ripple-bg overflow-hidden" x-data="rippleBackground()">
    <!-- Ripple Grid -->
    <div class="ripple-grid">
      <template x-for="i in 650" :key="i">
        <div 
          class="ripple-cell" 
          :class="{ 'animating': animatingCells.includes(i-1) }"
          :style="cellStyles[i-1] || {}"
          @click="handleCellClick($event, i-1)">
        </div>
      </template>
    </div>
    <div class="relative pt-10 pb-16 stars-content">
      <div class="max-w-2xl mx-auto px-4 sm:px-6">
        
        <!-- Header -->
        <div class="text-center mb-12">
          <div class="inline-flex items-center bg-black/[0.06] rounded-full px-4 py-2 mb-6">
            <div class="w-2 h-2 bg-[#30D158] rounded-full mr-2"></div>
            <span class="text-[13px] font-medium text-black/70 tracking-[-0.01em]">Early Access</span>
          </div>
          <h1 class="text-[36px] leading-[1.1] sm:text-[48px] sm:leading-[1.07] font-semibold tracking-[-0.022em] text-black mb-5" x-text="verticalData.emailCapture.headline"></h1>
          <p class="text-[17px] leading-[1.42] sm:text-[19px] sm:leading-[1.38] font-normal tracking-[-0.022em] text-black/60" x-text="verticalData.emailCapture.message"></p>
        </div>
        
        <!-- Benefits -->
        <div class="mb-10 px-4 sm:px-0">
          <h2 class="text-[19px] font-semibold tracking-[-0.022em] text-black mb-5">Early Access Benefits</h2>
          <div class="space-y-3">
            <template x-for="benefit in verticalData.emailCapture.benefits" :key="benefit">
              <div class="flex items-start">
                <div class="flex-shrink-0 w-5 h-5 rounded-full bg-black/[0.08] flex items-center justify-center mr-3 mt-0.5">
                  <div class="w-2 h-2 rounded-full bg-black"></div>
                </div>
                <span class="text-[15px] text-black/80 font-normal leading-[1.47] tracking-[-0.01em]" x-text="benefit"></span>
              </div>
            </template>
          </div>
        </div>

        <!-- Form -->
        <div class="bg-white border border-black/[0.08] rounded-[18px] p-8 mb-8">
          <form @submit.prevent="submitForm()" class="space-y-5">
            <template x-for="field in verticalData.emailCapture.formFields" :key="field.name">
              <div>
                <!-- Text/Email Inputs -->
                <input 
                  x-show="field.type === 'text' || field.type === 'email'"
                  :type="field.type"
                  :name="field.name"
                  :placeholder="field.placeholder"
                  x-model="formData[field.name]"
                  @focus="onFormFieldFocus()"
                  :required="field.type === 'text' || field.type === 'email'"
                  class="w-full px-4 py-3 border border-black/[0.12] rounded-xl text-[16px] font-normal tracking-[-0.01em] focus:outline-none focus:border-black/[0.3] transition-colors duration-200 placeholder:text-black/40">
                
                <!-- Select Inputs -->
                <select 
                  x-show="field.type === 'select'"
                  :name="field.name"
                  x-model="formData[field.name]"
                  @focus="onFormFieldFocus()"
                  :required="field.type === 'select'"
                  class="w-full px-4 py-3 border border-black/[0.12] rounded-xl text-[16px] font-normal tracking-[-0.01em] focus:outline-none focus:border-black/[0.3] transition-colors duration-200 bg-white">
                  <option value="" x-text="field.placeholder"></option>
                  <template x-for="option in field.options" :key="option.value">
                    <option :value="option.value" x-text="option.label"></option>
                  </template>
                </select>
              </div>
            </template>
            
            <button 
              type="submit"
              @click="console.log('Submit button clicked', formData)"
              class="w-full bg-black text-white py-3 rounded-full text-[16px] font-medium tracking-[-0.022em] hover:bg-black/90 transition-colors duration-200 mt-6">
              Get Early Access
            </button>
          </form>
        </div>

        <!-- Privacy Notice -->
        <div class="text-center px-4 sm:px-0">
          <div class="inline-flex items-center space-x-2">
            <div class="hidden sm:block w-1.5 h-1.5 bg-black/[0.3] rounded-full flex-shrink-0"></div>
            <p class="text-[13px] text-black/60 font-normal tracking-[-0.01em] leading-tight" x-text="verticalData.emailCapture.privacy"></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Success Modal (Apple Style) -->
  <div 
    x-show="showSuccessModal" 
    x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0"
    x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-200"
    x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"
    class="fixed inset-0 z-[100] overflow-y-auto"
    style="display: none;"
    @click.self="showSuccessModal = false"
    @keydown.escape.window="showSuccessModal = false">
    
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-black/20 backdrop-blur-sm"></div>
    
    <!-- Modal -->
    <div class="relative min-h-screen flex items-center justify-center p-4">
      <div 
        x-show="showSuccessModal"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0 scale-95 translate-y-4"
        x-transition:enter-end="opacity-100 scale-100 translate-y-0"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100 scale-100 translate-y-0"
        x-transition:leave-end="opacity-0 scale-95 translate-y-4"
        class="relative bg-white rounded-[20px] shadow-[0_20px_40px_rgba(0,0,0,0.15)] max-w-sm w-full mx-auto overflow-hidden border border-black/[0.06]">
        
        <!-- Success Icon -->
        <div class="pt-8 pb-6 px-8 text-center">
          <div class="w-16 h-16 mx-auto mb-6 bg-[#30D158] rounded-full flex items-center justify-center">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
            </svg>
          </div>
          
          <!-- Title -->
          <h3 class="text-[22px] font-semibold tracking-tight text-black mb-3">Welcome to Early Access!</h3>
          
          <!-- Message -->
          <p class="text-[16px] leading-[1.47] tracking-[-0.01em] text-black/70 mb-1">
            Thank you for joining our early access program.
          </p>
          <p class="text-[16px] leading-[1.47] tracking-[-0.01em] text-black/70">
            We'll be in touch soon about <span class="font-medium" x-text="verticalData.brand"></span>.
          </p>
        </div>
        
        <!-- Benefits Reminder -->
        <div class="px-8 pb-6">
          <div class="bg-black/[0.03] rounded-[12px] p-4">
            <div class="text-[14px] font-medium text-black/80 mb-2">Your Early Access Benefits:</div>
            <div class="space-y-1">
              <div class="flex items-center text-[13px] text-black/70">
                <div class="w-1.5 h-1.5 bg-[#30D158] rounded-full mr-2 flex-shrink-0"></div>
                50% off your first 3 months
              </div>
              <div class="flex items-center text-[13px] text-black/70">
                <div class="w-1.5 h-1.5 bg-[#30D158] rounded-full mr-2 flex-shrink-0"></div>
                Free custom setup and training
              </div>
              <div class="flex items-center text-[13px] text-black/70">
                <div class="w-1.5 h-1.5 bg-[#30D158] rounded-full mr-2 flex-shrink-0"></div>
                Direct line to our founding team
              </div>
            </div>
          </div>
        </div>
        
        <!-- Action Button -->
        <div class="px-6 pb-6">
          <button 
            @click="showSuccessModal = false"
            class="w-full bg-black text-white py-3 rounded-full text-[16px] font-medium tracking-[-0.022em] hover:bg-black/90 transition-colors duration-200">
            Continue
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Page 4: Market Validation Dashboard -->
  <div x-show="currentPage === 'analytics'" class="min-h-screen bg-gray-50" x-data="analyticsDashboard()">
    
    <!-- Apple-Style Password Protection Modal -->
    <div x-show="showPasswordPrompt" class="fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4" x-cloak>
      <div class="bg-white/95 backdrop-blur-xl rounded-[24px] shadow-2xl border border-white/20 max-w-sm w-full">
        <!-- Header -->
        <div class="px-8 pt-8 pb-6 text-center">
          <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg">
            <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
            </svg>
          </div>
          <h2 class="text-[22px] font-semibold text-black/90 mb-2 tracking-[-0.015em]">Analytics Dashboard</h2>
          <p class="text-[15px] text-black/60 font-normal leading-[1.4] tracking-[-0.01em]">Enter your password to access<br>real-time performance data</p>
        </div>
        
        <!-- Form -->
        <div class="px-8 pb-8">
          <form @submit.prevent="submitAnalyticsPassword()" class="space-y-5">
            <div class="relative">
              <input 
                type="password" 
                x-model="analyticsPassword"
                placeholder="Password"
                class="w-full px-4 py-4 bg-gray-50 border-0 rounded-[12px] text-[16px] focus:outline-none focus:ring-0 focus:bg-white focus:shadow-[0_0_0_1px_rgba(59,130,246,0.5)] transition-all duration-200 placeholder-black/40"
                required
                autocomplete="off"
                x-ref="passwordInput"
              >
            </div>
            
            <div x-show="analyticsPasswordError" 
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 transform translate-y-1"
                 x-transition:enter-end="opacity-100 transform translate-y-0"
                 class="text-red-500 text-[14px] text-center font-medium" 
                 x-text="analyticsPasswordError">
            </div>
            
            <div class="flex gap-3 mt-6">
              <button 
                type="button"
                @click="closePasswordPrompt()"
                class="flex-1 py-3.5 text-[16px] font-medium text-blue-600 bg-transparent border-0 rounded-[12px] hover:bg-blue-50 transition-colors duration-200 active:scale-[0.98]"
              >
                Cancel
              </button>
              <button 
                type="submit"
                class="flex-1 py-3.5 text-[16px] font-semibold text-white bg-blue-600 border-0 rounded-[12px] hover:bg-blue-700 active:bg-blue-800 transition-all duration-200 active:scale-[0.98] shadow-sm"
              >
                Continue
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Analytics Dashboard Content (only show when authenticated) -->
    <div x-show="analyticsAccessGranted" class="relative pt-10 pb-16">
      <div class="max-w-7xl mx-auto px-4 sm:px-6">
        
        <!-- Header -->
        <div class="mb-8">
          <h1 class="text-[36px] leading-[1.1] sm:text-[48px] sm:leading-[1.07] font-semibold tracking-[-0.022em] text-black mb-4">Market Validation Dashboard</h1>
          <p class="text-[17px] leading-[1.42] font-normal tracking-[-0.022em] text-black/60">Find the best vertical to launch first based on conversion data</p>
        </div>

        <!-- 1. TOP ROW: WINNER + LEADERBOARD SIDE BY SIDE -->
        <div class="grid lg:grid-cols-3 gap-8 mb-12">
          
          <!-- LEFT: THE WINNER - Apple-Style Card -->
          <div x-show="selectedVertical">
            <div class="relative bg-white rounded-[20px] shadow-[0_4px_20px_rgba(0,0,0,0.08)] border border-black/[0.06] h-full">
              <!-- Header Section -->
              <div class="p-6 pb-4">
                <!-- Status Badge -->
                <div class="inline-flex items-center gap-1.5 px-2.5 py-1 bg-green-100 rounded-full mb-4">
                  <div class="w-1.5 h-1.5 bg-green-500 rounded-full"></div>
                  <span class="text-[11px] font-medium text-green-800 tracking-[0.01em] uppercase">RECOMMENDED</span>
                </div>
                
                <!-- Vertical Name -->
                <h2 class="text-[28px] leading-[1.1] font-bold tracking-[-0.02em] text-black mb-6 capitalize" x-text="selectedVertical?.vertical?.replace('-', ' ')"></h2>
                
                <!-- Primary Metric Card -->
                <div class="bg-gray-50 rounded-[16px] p-4 mb-6">
                  <div class="text-[13px] font-medium text-black/50 mb-1 tracking-[-0.01em] uppercase">MRR per 1,000 emails</div>
                  <div class="text-[36px] leading-[1] font-bold text-black tracking-[-0.03em]" x-text="'$' + selectedVertical?.stats?.mrrPer1000"></div>
                </div>
              </div>
              
              <!-- Metrics Grid -->
              <div class="px-6 pb-6">
                <div class="grid grid-cols-1 gap-3">
                  <div class="flex items-center justify-between py-2">
                    <span class="text-[14px] font-medium text-black/60">Form Completions</span>
                    <span class="text-[16px] font-semibold text-black" x-text="selectedVertical?.stats?.formCompletions"></span>
                  </div>
                  <div class="flex items-center justify-between py-2">
                    <span class="text-[14px] font-medium text-black/60">Conversion Rate</span>
                    <span class="text-[16px] font-semibold text-black" x-text="selectedVertical?.stats?.conversionRate + '%'"></span>
                  </div>
                  <div class="flex items-center justify-between py-2">
                    <span class="text-[14px] font-medium text-black/60">Average Order Value</span>
                    <span class="text-[16px] font-semibold text-black" x-text="'$' + selectedVertical?.stats?.avgOrderValue"></span>
                  </div>
                </div>
              </div>
              
              <!-- Footer Status -->
              <div class="px-6 pb-6">
                <div class="flex items-center gap-2 p-3 bg-black/[0.03] rounded-[12px]">
                  <div class="w-2 h-2 rounded-full flex-shrink-0" :class="selectedVertical?.stats?.isSignificant ? 'bg-green-500' : 'bg-orange-400'"></div>
                  <span class="text-[12px] font-medium text-black/70 tracking-[-0.01em]" x-text="selectedVertical?.stats?.pageViews + ' visitors • ' + (selectedVertical?.stats?.isSignificant ? '95% confidence' : 'Need ' + selectedVertical?.stats?.sampleNeeded + ' more')"></span>
                </div>
              </div>
            </div>
          </div>

          <!-- RIGHT: THE EVIDENCE - Vertical Performance Leaderboard -->
          <div class="lg:col-span-2">
            <div class="bg-white rounded-[18px] p-6 shadow-sm border border-black/[0.08] h-full">
              <h3 class="text-[20px] font-semibold tracking-tight text-black mb-4">🎯 Vertical Performance Leaderboard</h3>
            
            <!-- Table Header -->
            <div class="grid grid-cols-9 gap-3 pb-3 border-b border-black/[0.08] text-[13px] font-medium text-black/60">
              <div>Rank</div>
              <div>Vertical</div>
              <div>Visitors</div>
              <div>To Pricing</div>
              <div>To Trial</div>
              <div>Completed</div>
              <div>Conv Rate</div>
              <div>Avg $</div>
              <div>MRR / Mil</div>
            </div>
            
            <!-- Scrollable Vertical Rows -->
            <div class="max-h-96 overflow-y-auto hover:overflow-y-scroll scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent">
              <div class="space-y-1 mt-3">
                <template x-for="([vertical, stats], index) in getSortedVerticals()" :key="vertical">
                  <div class="grid grid-cols-9 gap-3 py-2.5 px-2 hover:bg-black/[0.04] rounded-lg transition-colors text-[13px] cursor-pointer" 
                       :class="selectedVertical?.vertical === vertical ? 'bg-blue-50 border border-blue-200' : (index === 0 ? 'bg-green-50 border border-green-200' : '')"
                       @click="selectVertical(vertical, stats)">
                    <div class="flex items-center">
                      <span class="text-[14px] font-semibold" x-text="index + 1" :class="index === 0 ? 'text-green-700' : 'text-black'"></span>
                      <span x-show="index === 0" class="ml-1.5 text-[12px]">🏆</span>
                    </div>
                    <div class="text-[13px] font-medium text-black capitalize truncate" x-text="vertical.replace('-', ' ')" :title="vertical.replace('-', ' ')"></div>
                    <div class="text-[13px] text-black" x-text="stats.pageViews" :title="'Unique visitors: ' + stats.pageViews + ' (Total pageviews: ' + stats.totalPageViews + ')'"></div>
                    <div class="text-[13px] text-black" x-text="stats.pricingClicks"></div>
                    <div class="text-[13px] text-black" x-text="stats.tierClicks"></div>
                    <div class="text-[13px] text-black" x-text="stats.formCompletions"></div>
                    <div class="text-[13px] font-semibold" x-text="stats.conversionRate + '%'" :class="index === 0 ? 'text-green-700' : 'text-black'"></div>
                    <div class="text-[13px] font-bold text-green-600" x-text="'$' + stats.avgDollar"></div>
                    <div class="text-[13px] font-bold text-blue-600" x-text="'$' + stats.mrrPer1000"></div>
                  </div>
                </template>
              </div>
            </div>
            </div>
          </div>
        </div>

        <!-- 3. REVENUE POTENTIAL & MARKET READINESS -->
        <div class="grid lg:grid-cols-2 gap-8 mb-8">
          
          <!-- LEFT: Revenue Potential Calculator -->
          <div>
            <div class="bg-white rounded-[18px] p-6 shadow-sm border border-black/[0.08] h-full">
              <h3 class="text-[20px] font-semibold tracking-tight text-black mb-4">💰 Revenue Potential Calculator</h3>
              <div class="text-[13px] text-black/60 mb-4">Expected MRR if we emailed every business in the US</div>
              
              <div class="space-y-1.5 max-h-64 overflow-y-auto">
                <template x-for="(market, index) in getTotalMarketAnalysis()" :key="market.vertical">
                  <div class="flex items-center justify-between p-2.5 rounded-lg border transition-colors text-[11px]" :class="index === 0 ? 'bg-blue-50 border-blue-200' : 'bg-black/[0.02] border-transparent'">
                    <div class="flex items-center gap-2.5">
                      <div class="flex items-center gap-1">
                        <span class="text-[11px] font-semibold text-black/60" x-text="index + 1"></span>
                        <span x-show="index === 0" class="text-[10px]">👑</span>
                      </div>
                      <div>
                        <div class="text-[12px] font-medium text-black capitalize" x-text="market.vertical.replace('-', ' ')"></div>
                        <div class="text-[10px] text-black/60" x-text="market.businessCount.toLocaleString() + ' businesses'"></div>
                      </div>
                    </div>
                    <div class="text-right">
                      <div class="text-[12px] font-bold" :class="index === 0 ? 'text-blue-700' : 'text-black'" x-text="'$' + market.totalMarketValue.toLocaleString()"></div>
                      <div class="text-[9px] text-black/50">Expected MRR</div>
                    </div>
                  </div>
                </template>
              </div>
            </div>
          </div>

          <!-- RIGHT: Market Readiness Scores -->
          <div>
            <div class="bg-white rounded-[18px] p-6 shadow-sm border border-black/[0.08] h-full">
              <h3 class="text-[20px] font-semibold tracking-tight text-black mb-4">🚨 Market Readiness Scores</h3>
              <div class="text-[13px] text-black/60 mb-4">Form completion focus: 0-10 scale</div>
              
              <div class="space-y-1.5 max-h-64 overflow-y-auto">
              <template x-for="([vertical, stats], index) in getVerticalsByReadiness()" :key="vertical">
                <div class="p-2.5 rounded-lg border transition-colors" :class="getMarketReadinessScore(stats) >= 7 ? 'bg-green-50 border-green-200' : getMarketReadinessScore(stats) >= 5 ? 'bg-yellow-50 border-yellow-200' : 'bg-red-50 border-red-200'">
                  <div class="flex items-center justify-between mb-1">
                    <div class="flex items-center gap-2">
                      <span class="text-[11px] font-semibold text-black/60" x-text="index + 1"></span>
                      <span class="text-[12px] font-medium text-black capitalize" x-text="vertical.replace('-', ' ')"></span>
                    </div>
                    <span class="text-[14px] font-bold" :class="getMarketReadinessScore(stats) >= 7 ? 'text-green-700' : getMarketReadinessScore(stats) >= 5 ? 'text-yellow-700' : 'text-red-700'" x-text="getMarketReadinessScore(stats) + '/10'"></span>
                  </div>
                  <div class="text-[10px] text-black/60" x-text="stats.formCompletions + ' completions + ' + stats.formStarts + ' starts + ' + stats.formReaches + ' reaches'"></div>
                </div>
              </template>
            </div>
            </div>
          </div>
        </div>

        <!-- 4. PRICING VALIDATION - Heatmap -->
        <div class="mb-8">
          <div class="bg-white rounded-[18px] p-6 shadow-sm border border-black/[0.08]">
            <h3 class="text-[22px] font-semibold tracking-tight text-black mb-6">💰 Pricing Validation Heatmap</h3>
            <div class="text-[14px] text-black/60 mb-6">Heat map: Which verticals prefer which price points (darker = higher preference)</div>
            
            <!-- Heatmap Container -->
            <div class="overflow-x-auto">
              <div class="min-w-full">
                <!-- Header Row with Vertical Names -->
                <div class="grid gap-1 mb-6" :style="'grid-template-columns: 60px repeat(' + Object.keys(pricingValidation || {}).filter(v => pricingValidation[v]?.total > 0).length + ', 1fr)'">
                  <div class="text-[12px] font-medium text-black/60 p-2"></div>
                  <template x-for="([vertical, validation]) in Object.entries(pricingValidation || {})" :key="vertical">
                    <div x-show="validation.total > 0" class="h-16 flex items-end justify-center overflow-visible">
                      <div class="text-[11px] font-medium text-black text-center transform -rotate-45 origin-center whitespace-nowrap" x-text="vertical.replace('-', ' ')"></div>
                    </div>
                  </template>
                </div>
                
                <!-- $79 Row -->
                <div class="grid gap-1 mb-1" :style="'grid-template-columns: 60px repeat(' + Object.keys(pricingValidation || {}).filter(v => pricingValidation[v]?.total > 0).length + ', 1fr)'">
                  <div class="text-[12px] font-medium text-blue-700 p-2 text-right">$79</div>
                  <template x-for="([vertical, validation]) in Object.entries(pricingValidation || {})" :key="vertical">
                    <div x-show="validation.total > 0" 
                         class="h-12 rounded flex items-center justify-center text-[11px] font-semibold transition-all duration-200"
                         :class="validation['$79'] >= 75 ? 'bg-blue-600 text-white' : 
                                validation['$79'] >= 50 ? 'bg-blue-400 text-white' : 
                                validation['$79'] >= 25 ? 'bg-blue-200 text-blue-800' : 
                                validation['$79'] > 0 ? 'bg-blue-100 text-blue-700' : 'bg-gray-100 text-gray-500'"
                         :title="vertical.replace('-', ' ') + ': ' + validation['$79'] + '% chose $79'"
                         x-text="validation['$79'] + '%'">
                    </div>
                  </template>
                </div>
                
                <!-- $149 Row -->
                <div class="grid gap-1 mb-1" :style="'grid-template-columns: 60px repeat(' + Object.keys(pricingValidation || {}).filter(v => pricingValidation[v]?.total > 0).length + ', 1fr)'">
                  <div class="text-[12px] font-medium text-purple-700 p-2 text-right">$149</div>
                  <template x-for="([vertical, validation]) in Object.entries(pricingValidation || {})" :key="vertical">
                    <div x-show="validation.total > 0" 
                         class="h-12 rounded flex items-center justify-center text-[11px] font-semibold transition-all duration-200"
                         :class="validation['$149'] >= 75 ? 'bg-purple-600 text-white' : 
                                validation['$149'] >= 50 ? 'bg-purple-400 text-white' : 
                                validation['$149'] >= 25 ? 'bg-purple-200 text-purple-800' : 
                                validation['$149'] > 0 ? 'bg-purple-100 text-purple-700' : 'bg-gray-100 text-gray-500'"
                         :title="vertical.replace('-', ' ') + ': ' + validation['$149'] + '% chose $149'"
                         x-text="validation['$149'] + '%'">
                    </div>
                  </template>
                </div>
                
                <!-- $299 Row -->
                <div class="grid gap-1" :style="'grid-template-columns: 60px repeat(' + Object.keys(pricingValidation || {}).filter(v => pricingValidation[v]?.total > 0).length + ', 1fr)'">
                  <div class="text-[12px] font-medium text-green-700 p-2 text-right">$299</div>
                  <template x-for="([vertical, validation]) in Object.entries(pricingValidation || {})" :key="vertical">
                    <div x-show="validation.total > 0" 
                         class="h-12 rounded flex items-center justify-center text-[11px] font-semibold transition-all duration-200"
                         :class="validation['$299'] >= 75 ? 'bg-green-600 text-white' : 
                                validation['$299'] >= 50 ? 'bg-green-400 text-white' : 
                                validation['$299'] >= 25 ? 'bg-green-200 text-green-800' : 
                                validation['$299'] > 0 ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-500'"
                         :title="vertical.replace('-', ' ') + ': ' + validation['$299'] + '% chose $299'"
                         x-text="validation['$299'] + '%'">
                    </div>
                  </template>
                </div>
                
                <!-- Legend -->
                <div class="mt-6 flex items-center gap-6 text-[11px] text-black/60">
                  <span class="font-medium">Intensity:</span>
                  <div class="flex items-center gap-2">
                    <div class="w-4 h-4 bg-gray-100 rounded"></div>
                    <span>0%</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-4 h-4 bg-blue-200 rounded"></div>
                    <span>25%</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-4 h-4 bg-blue-400 rounded"></div>
                    <span>50%</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-4 h-4 bg-blue-600 rounded"></div>
                    <span>75%+</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>


        <!-- 5. DIAGNOSTICS - Funnel Drop-off Analysis -->
        <div class="mb-8">
          <div class="bg-white rounded-[18px] p-6 shadow-sm border border-black/[0.08]">
            <h3 class="text-[22px] font-semibold tracking-tight text-black mb-6">🔍 Funnel Drop-off Analysis</h3>
            <div class="text-[14px] text-black/60 mb-4">Where to optimize: Where each vertical loses potential customers</div>
            
            <!-- Table Header -->
            <div class="grid grid-cols-5 gap-4 pb-4 border-b border-black/[0.08] text-[14px] font-medium text-black/60">
              <div>Vertical</div>
              <div>Landing→Pricing</div>
              <div>Pricing→Trial</div>
              <div>Trial→Complete</div>
              <div>Problem Areas</div>
            </div>
            
            <!-- Funnel Rows -->
            <div class="space-y-2 mt-4">
              <template x-for="([vertical, stats]) in getSortedVerticals().slice(0, 6)" :key="vertical">
                <div class="grid grid-cols-5 gap-4 py-3 px-2 hover:bg-black/[0.02] rounded-lg transition-colors">
                  <div class="text-[15px] font-medium text-black capitalize" x-text="vertical.replace('-', ' ')"></div>
                  <div class="text-[15px]" :class="getFunnelDropoffs(stats).landingToPricing > 60 ? 'text-red-600 font-medium' : 'text-black'" x-text="getFunnelDropoffs(stats).landingToPricing + '% loss'"></div>
                  <div class="text-[15px]" :class="getFunnelDropoffs(stats).pricingToTrial > 75 ? 'text-red-600 font-medium' : 'text-black'" x-text="getFunnelDropoffs(stats).pricingToTrial + '% loss'"></div>
                  <div class="text-[15px]" :class="getFunnelDropoffs(stats).trialToComplete > 50 ? 'text-red-600 font-medium' : 'text-black'" x-text="getFunnelDropoffs(stats).trialToComplete + '% loss'"></div>
                  <div class="text-[13px] text-red-600">
                    <template x-for="problem in identifyProblemAreas(getFunnelDropoffs(stats))" :key="problem">
                      <span class="inline-block bg-red-100 px-2 py-1 rounded mr-1 mb-1" x-text="problem"></span>
                    </template>
                    <span x-show="identifyProblemAreas(getFunnelDropoffs(stats)).length === 0" class="text-green-600">✅ Good flow</span>
                  </div>
                </div>
              </template>
            </div>
          </div>
        </div>


        <!-- DECISION BOX -->
        <div x-show="winningVertical?.stats?.isSignificant" class="mb-8">
          <div class="bg-blue-50 rounded-[18px] p-6 shadow-sm border border-blue-200">
            <h3 class="text-[22px] font-semibold tracking-tight text-blue-900 mb-4">🚀 Launch Decision</h3>
            <div class="grid md:grid-cols-2 gap-6">
              <div>
                <div class="text-[16px] font-medium text-blue-800 mb-2">Primary Recommendation</div>
                <div class="text-[15px] text-blue-700 mb-4" x-text="'Launch ' + winningVertical?.vertical?.replace('-', ' ') + ' first - $' + winningVertical?.stats?.expectedRevenue500 + ' expected from 500 emails (' + winningVertical?.stats?.formCompletions + ' × 20% + ' + winningVertical?.stats?.formStarts + ' × 5% + ' + winningVertical?.stats?.formReaches + ' × 3%)'"></div>
              </div>
              <div>
                <div class="text-[16px] font-medium text-blue-800 mb-2">Next Steps</div>
                <div class="text-[15px] text-blue-700" x-text="getNextSteps()"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- 6. SIDE-BY-SIDE: Form Submissions & Sample Size Tracker -->
        <div class="mb-8">
          <div class="grid lg:grid-cols-2 gap-6">
            
            <!-- Left Side: Captured Form Submissions -->
            <div class="bg-white rounded-[18px] p-6 shadow-sm border border-black/[0.08]">
              <h3 class="text-[22px] font-semibold tracking-tight text-black mb-6">📋 Captured Form Submissions</h3>
              <div class="text-[14px] text-black/60 mb-4">Proof it works: Actual users who completed the email capture form</div>
              
              <div x-show="formSubmissions.length > 0" class="space-y-4 max-h-96 overflow-y-auto">
                <template x-for="(submission, index) in formSubmissions.slice().reverse()" :key="index">
                  <div class="p-4 bg-green-50 border border-green-200 rounded-xl">
                    <div class="grid gap-4">
                      <div>
                        <div class="text-[16px] font-medium text-green-800 mb-2 capitalize" x-text="submission.vertical?.replace('-', ' ')"></div>
                        <div class="space-y-1">
                          <div class="text-[14px] text-black">
                            <span class="font-medium">Email:</span> 
                            <span x-text="submission.formData?.email || 'N/A'"></span>
                          </div>
                          <template x-for="(value, key) in submission.formData || {}" :key="key">
                            <div x-show="key !== 'email'" class="text-[14px] text-black/70">
                              <span class="font-medium capitalize" x-text="key.replace(/([A-Z])/g, ' $1').toLowerCase()"></span>: 
                              <span x-text="value"></span>
                            </div>
                          </template>
                          <div x-show="submission.selectedTier" class="text-[14px] text-black/70">
                            <span class="font-medium">Price point chosen:</span> 
                            <span x-text="submission.selectedTier"></span>
                          </div>
                        </div>
                      </div>
                      <div class="text-right">
                        <div class="text-[13px] text-black/60 mb-1" x-text="submission.city + ', ' + submission.country"></div>
                        <div class="text-[13px] text-black/60 mb-1" x-text="submission.ip"></div>
                        <div class="text-[13px] text-black/60" x-text="new Date(submission.timestamp).toLocaleString()"></div>
                      </div>
                    </div>
                  </div>
                </template>
              </div>
              
              <div x-show="formSubmissions.length === 0" class="text-center py-8 text-black/60 bg-gray-50 rounded-xl">
                <div class="text-[48px] mb-4">📝</div>
                <div class="text-[18px] font-medium text-black mb-2">No form submissions captured yet</div>
                <div class="text-[14px]">Complete the email capture form on any vertical to see submissions appear here</div>
              </div>
            </div>

            <!-- Right Side: Sample Size Tracker -->
            <div class="bg-white rounded-[18px] p-6 shadow-sm border border-black/[0.08]">
              <h3 class="text-[22px] font-semibold tracking-tight text-black mb-6">📊 Sample Size Tracker</h3>
              <div class="text-[14px] text-black/60 mb-6">Can I trust this data? (30+ unique visitors needed for 95% confidence)</div>
              
              <div class="space-y-4">
                <template x-for="([vertical, stats]) in getSortedVerticals().slice(0, 8)" :key="vertical">
                  <div>
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-[15px] font-medium text-black capitalize" x-text="vertical.replace('-', ' ')"></span>
                      <span class="text-[14px] text-black/60" x-text="stats.pageViews + '/30'"></span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2 mb-2">
                      <div class="h-2 rounded-full transition-all duration-300" 
                           :class="stats.isSignificant ? 'bg-green-500' : 'bg-blue-500'"
                           :style="'width: ' + Math.min(100, (stats.pageViews / 30) * 100) + '%'"></div>
                    </div>
                    <div class="text-[13px]" :class="stats.isSignificant ? 'text-green-600' : 'text-orange-600'">
                      <span x-show="stats.isSignificant">✅ Statistically significant</span>
                      <span x-show="!stats.isSignificant" x-text="'⚠️ Need ' + stats.sampleNeeded + ' more visitors for confidence'"></span>
                    </div>
                  </div>
                </template>
              </div>
            </div>

          </div>
        </div>

        <!-- 9. MONITORING - Recent Activity -->
        <div class="mb-8">
          <div class="bg-white rounded-[18px] p-6 shadow-sm border border-black/[0.08]">
            <h3 class="text-[22px] font-semibold tracking-tight text-black mb-6">📈 Recent Activity</h3>
            <div class="text-[14px] text-black/60 mb-4">What's happening now: Real-time event monitoring</div>
            
            <!-- Filters -->
            <div class="flex gap-3 mb-4">
              <select x-model="activityEventFilter" class="px-3 py-2 border border-black/[0.12] rounded-xl text-[14px] font-normal">
                <option value="">All Events</option>
                <option value="page_view">Page Views</option>
                <option value="pricing_button_click">Pricing Clicks</option>
                <option value="pricing_tier_click">Tier Clicks</option>
                <option value="email_form_start">Form Starts</option>
                <option value="email_form_field">Form Fields</option>
                <option value="email_form_complete">Form Completions</option>
              </select>
              
              <select x-model="activityVerticalFilter" class="px-3 py-2 border border-black/[0.12] rounded-xl text-[14px] font-normal">
                <option value="">All Verticals</option>
                <template x-for="vertical in ['personal-injury', 'hvac', 'plumbing', 'real-estate', 'electrical', 'insurance', 'dental', 'auto-repair', 'pest-control', 'veterinary', 'property-management', 'lawn-care', 'mortgage-broker', 'general-contractors', 'accounting', 'physical-therapy', 'hair-salons', 'fitness-studios', 'urgent-care', 'locksmith', 'mental-health', 'pet-grooming', 'dry-cleaning', 'equipment-rental', 'storage-facilities']" :key="vertical">
                  <option :value="vertical" x-text="vertical.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())"></option>
                </template>
              </select>
              
              <input type="text" x-model="activitySearchFilter" placeholder="Search..." class="px-3 py-2 border border-black/[0.12] rounded-xl text-[14px] font-normal flex-1">
              
              <button @click="activityEventFilter = ''; activityVerticalFilter = ''; activitySearchFilter = ''" 
                      x-show="activityEventFilter || activityVerticalFilter || activitySearchFilter"
                      class="px-3 py-2 text-[14px] text-blue-600 hover:bg-blue-50 rounded-xl transition-colors">
                Clear
              </button>
            </div>
            
            <div class="space-y-3 max-h-80 overflow-y-auto">
              <template x-for="(event, index) in events.slice(0, 100).filter(e => {
                if (activityEventFilter && e.event !== activityEventFilter) return false;
                if (activityVerticalFilter && e.data.vertical !== activityVerticalFilter) return false;
                if (activitySearchFilter) {
                  const search = activitySearchFilter.toLowerCase();
                  const eventText = e.event.toLowerCase();
                  const verticalText = (e.data.vertical || '').toLowerCase();
                  const tierText = (e.data.tier_price || '').toLowerCase();
                  if (!eventText.includes(search) && !verticalText.includes(search) && !tierText.includes(search)) return false;
                }
                return true;
              })" :key="index">
                <div class="flex items-center justify-between p-3 bg-black/[0.02] rounded-xl">
                  <div class="flex items-center gap-3">
                    <span class="text-[14px] font-medium text-black capitalize" x-text="event.event.replace('_', ' ')"></span>
                    <span class="text-[13px] text-black/60 capitalize" x-text="event.data.vertical?.replace('-', ' ')"></span>
                    <span x-show="event.data.tier_price" class="text-[13px] bg-green-100 text-green-700 px-2 py-1 rounded" x-text="event.data.tier_price"></span>
                  </div>
                  <span class="text-[13px] text-black/60" x-text="new Date(event.data.timestamp).toLocaleTimeString()"></span>
                </div>
              </template>
            </div>
          </div>
        </div>

        <!-- 10. ADMIN CONTROLS (Bottom Priority) -->
        <div class="mb-8">
          <div class="bg-white rounded-[18px] p-6 shadow-sm border border-black/[0.08]">
            <h3 class="text-[22px] font-semibold tracking-tight text-black mb-6">⚙️ Dashboard Controls</h3>
            <div class="text-[14px] text-black/60 mb-4">Administrative functions and data management</div>
            
            <div class="grid sm:grid-cols-3 gap-4">
              <div>
                <label class="block text-[14px] font-medium text-black/80 mb-2">Date Range</label>
                <select x-model="dateRange" @change="finalizeStats()" class="w-full px-4 py-2 border border-black/[0.12] rounded-xl text-[16px] font-normal">
                  <option value="1d">Last 24 hours</option>
                  <option value="7d">Last 7 days</option>
                  <option value="30d">Last 30 days</option>
                </select>
              </div>
              <div class="flex items-end">
                <button @click="exportData()" class="w-full px-6 py-2 bg-black text-white rounded-xl text-[16px] font-medium hover:bg-black/90 transition-colors">
                  Export Data
                </button>
              </div>
              <div class="flex items-end">
                <button @click="confirmResetData()" class="w-full px-6 py-2 bg-red-600 text-white rounded-xl text-[16px] font-medium hover:bg-red-700 transition-colors">
                  Reset Data
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Reset Confirmation Modal -->
        <div x-show="showResetModal" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" style="display: none;">
          <div x-show="showResetModal" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0 transform scale-95" x-transition:enter-end="opacity-100 transform scale-100" x-transition:leave="transition ease-in duration-200" x-transition:leave-start="opacity-100 transform scale-100" x-transition:leave-end="opacity-0 transform scale-95" class="bg-white rounded-[18px] p-8 max-w-md mx-4 shadow-xl">
            <div class="text-center">
              <div class="text-[48px] mb-4">⚠️</div>
              <h3 class="text-[24px] font-semibold text-black mb-4">Reset Analytics Data?</h3>
              <p class="text-[16px] text-black/60 mb-6">This will permanently delete all analytics data including visitor tracking, conversion events, and pricing preferences. This action cannot be undone.</p>
              
              <div class="flex gap-4 justify-center">
                <button @click="cancelReset()" class="px-6 py-3 bg-gray-100 text-black rounded-xl text-[16px] font-medium hover:bg-gray-200 transition-colors">
                  Cancel
                </button>
                <button @click="resetAllData()" class="px-6 py-3 bg-red-600 text-white rounded-xl text-[16px] font-medium hover:bg-red-700 transition-colors">
                  Yes, Reset Data
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End of authenticated analytics content -->
    
  </div>
  <!-- End of analytics page -->

</body>
</html>